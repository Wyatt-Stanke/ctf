# Pipeline CTF — Overview

## Theme

"NimbusOps" is a fictional cloud-infrastructure company running a
self-hosted **GitHub Enterprise Server** (GHES) instance at
`github.nimbusops.internal`.  Their public-facing **status page** is
deployed via a GitHub Actions CI/CD pipeline.

The challenge asks the player to **extract a deploy key** (the flag)
that is used to authenticate with NimbusOps' private container registry.

## Flag

```
flag{l0g_m4sk1ng_1s_n0t_s3cur1ty}
```

## Core Lesson

GitHub Actions masks secrets in workflow logs by performing **exact
string replacement** — every literal occurrence of the secret value is
replaced with `***`.  However, if the workflow *transforms* the secret
(e.g. base64-encodes it, hashes it, embeds it in a larger string) the
masking engine will **not** catch the transformed version.

The flag name itself spells out the moral:
**"Log masking is not security."**

## Difficulty

Medium.  Requires familiarity with:

- standard web recon (robots.txt, HTML source comments)
- GitHub Actions YAML (workflow_dispatch inputs, `if: failure()`)
- basic base64 encoding/decoding

## Surface Area

| Path | What it is |
|------|------------|
| `/` | Status dashboard (public) |
| `/challenge/` | CTF briefing & hints |
| `/robots.txt` | Hints at hidden paths |
| `/_logs/` | Build log metadata + deploy logs |
| `/_logs/latest.json` | Run index with actors, commits, and statuses |
| `/_logs/deploy-116.log` | **Failed** deploy — DNS outage, debug dump ran but auth file was empty |
| `/_logs/deploy-118.log` | Successful deploy (Feb 3) |
| `/_logs/deploy-119.log` | Successful deploy (Feb 7) |
| `/_logs/deploy-120.log` | Successful deploy — latest (Feb 9) |
| `/.github/workflows/` | CI/CD workflow definitions |
| `/.env.example` | Placeholder secrets |
| `/nginx.conf` | Nginx config for the container (referenced by Dockerfile) |
| `/_ghes/` | Simulated GitHub Enterprise Server UI |
| `/_ghes/index.html` | GHES dashboard — activity feed, repos, announcements |
| `/_ghes/repo.html` | Repository page — file browser, README |
| `/_ghes/actions.html` | Actions workflow run history |
| `/_ghes/dispatch.html` | Workflow dispatch form (the "interactive" part) |
| `/_ghes/issues.html` | Issue tracker — 3 open, 7 closed |
| `/_ghes/issue-55.html` | Issue #55 detail — team discusses secret safety (key storytelling) |
| `/_ghes/pulls.html` | Pull request list — 1 open, 8 merged |
| `/_ghes/commits.html` | Commit history (Nov 2025 – Feb 2026) |
| `/_ghes/wiki.html` | Wiki home — quick links, team roster, key workflows |
| `/_ghes/wiki-runbook.html` | On-call runbook — troubleshooting steps |
| `/_ghes/wiki-architecture.html` | Architecture overview with ASCII diagram |
| `/_ghes/wiki-secrets.html` | Secret management docs — audit quote, base64 auth details |
| `/_ghes/wiki-postmortem-nov.html` | Postmortem for Nov 14 outage (origin of the status dashboard) |
| `/js/ci-runner.js` | Obfuscated in-browser pipeline simulator |
| `/js/_ci-runner-src.js` | **no_include** — unobfuscated source (contains the flag) |

## Characters

| Username | Name | Role | Notes |
|----------|------|------|-------|
| `msantiago` | Marina Santiago | DevOps Lead | Incident commander, repo admin, created status-dash after Nov 14 outage |
| `jpark` | James Park | Senior Backend Eng | Wrote the CI/CD pipeline, added registry_override/skip_preflight |
| `akovacs` | Alex Kovacs | Junior Developer | Asked about secret safety in issue #55, told "we're fine" |
